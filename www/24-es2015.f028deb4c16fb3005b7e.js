(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{GpjZ:function(e,t,s){"use strict";s.r(t),s.d(t,"UserlistsPageModule",(function(){return g}));var i=s("ofXK"),o=s("3Pt+"),r=s("TEn/"),n=s("tyNb"),a=s("fXoL"),c=s("VGr1"),l=s("hq03");function u(e,t){if(1&e&&(a.Kb(0,"ion-select-option",11),a.jc(1),a.Jb()),2&e){const e=t.$implicit;a.Zb("value",e),a.xb(1),a.kc(e.EMAIL_ADDRESS)}}const h=[{path:"",component:(()=>{class e{constructor(e,t,s){this.service=e,this.alert=t,this.menu=s,this.userPosition="create Password",this.userCreate={EMAIL_ADDRESS:""},console.log(e.userList)}ngOnInit(){this.getUsers()}ionViewDidEnter(){console.log("ionViewDidEnter"),this.menu.enable(!1)}getUsers(){this.service.showLoader(),this.service.postObs("/callApi",{method:"GET",url:"https://api.insightly.com/v3.1/Users?count_total=false",data:!1,key:"Basic YmY0NGViN2QtMWFmYy00NjA4LTg4MDQtMGVhNWY4YTc4NTVh"}).subscribe(e=>{this.service.hideLoader(),200==e.status?this.service.userList=e.result:this.alert.presentToast("No more users")})}selectUser(){console.log(this.userCreate),this.service.postObs("/userFind/user",{user_id:this.userCreate.USER_ID}).subscribe(e=>{this.userPosition=404==e.status?"createPassword":"login"})}create(e){let t={email:this.userCreate.EMAIL_ADDRESS,password:e.value.password,user_id:this.userCreate.USER_ID,first_name:this.userCreate.FIRST_NAME,last_name:this.userCreate.LAST_NAME,dropbox_email:this.userCreate.EMAIL_DROPBOX_ADDRESS,dropbox_identity:this.userCreate.EMAIL_DROPBOX_IDENTIFIER,instance_id:this.userCreate.INSTANCE_ID,user_currency:this.userCreate.USER_CURRENCY};this.service.checkProperties(t)?(this.service.showLoader(),this.service.postObs("/postData/user/",t).subscribe(t=>{console.log(t),this.service.hideLoader(),201==t.status?(this.alert.presentToast("User created..!"),console.log(t),this.login(e)):this.alert.presentToast("User create failed..!")},e=>{console.log(e)})):this.alert.presentToast("Fill all the fields")}login(e){let t={email:this.userCreate.EMAIL_ADDRESS,password:e.value.password};console.log(t),this.service.checkProperties(t)?(this.service.showLoader(),this.service.postObs("/login/",t).subscribe(e=>{this.service.hideLoader(),200==e.status?(this.service.st.remove("token"),this.service.st.set("token",e.result[0].token),this.service.token=e.result[0].token,this.service.st.set("userdata",e.result[0]),this.service.userdata=e.result[0],this.alert.presentToast("Logged In"),this.service.navCtrl.navigateRoot("/main")):this.alert.presentToast("Please check the password")},e=>{console.log(e),this.service.hideLoader()})):this.alert.presentToast("Fill all the fields")}setUIBackButtonAction(){this.backButton.onClick=()=>{this.userPosition="Users"}}back(){this.userPosition="Users"}}return e.\u0275fac=function(t){return new(t||e)(a.Hb(c.a),a.Hb(l.a),a.Hb(r.R))},e.\u0275cmp=a.Bb({type:e,selectors:[["app-userlists"]],viewQuery:function(e,t){var s;1&e&&a.nc(r.d,!0),2&e&&a.bc(s=a.Tb())&&(t.backButton=s.first)},decls:20,vars:3,consts:[[1,"vertical-center"],["method","post",3,"ngSubmit"],["form","ngForm"],["text-center","","lines","none",1,"login-logo"],["src","./assets/imgs/logo.png"],["position","floating"],["name","email","interface","action-sheet",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["ngModel","","type","password","name","password"],["color","danger",1,"ion-text-right","ion-padding-horizontal"],["expand","block","shape","round","type","submit","expand","full","color","primary",1,"footer_btn",3,"click"],[3,"value"]],template:function(e,t){if(1&e){const e=a.Lb();a.Kb(0,"ion-content"),a.Kb(1,"div",0),a.Kb(2,"form",1,2),a.Sb("ngSubmit",(function(){a.ec(e);const s=a.cc(3);return"login"==t.userPosition?t.login(s):t.create(s)})),a.Kb(4,"ion-item",3),a.Kb(5,"ion-label"),a.Ib(6,"img",4),a.Jb(),a.Jb(),a.Kb(7,"ion-item"),a.Kb(8,"ion-label",5),a.jc(9,"Email"),a.Jb(),a.Kb(10,"ion-select",6),a.Sb("ngModelChange",(function(e){return t.userCreate=e}))("ionChange",(function(){return t.selectUser()})),a.ic(11,u,2,2,"ion-select-option",7),a.Jb(),a.Jb(),a.Kb(12,"ion-item"),a.Kb(13,"ion-label",5),a.jc(14,"Password"),a.Jb(),a.Ib(15,"ion-input",8),a.Jb(),a.Kb(16,"p",9),a.jc(17,"Forgot Password?"),a.Jb(),a.Kb(18,"ion-button",10),a.Sb("click",(function(){a.ec(e);const s=a.cc(3);return"login"==t.userPosition?t.login(s):t.create(s)})),a.jc(19),a.Jb(),a.Jb(),a.Jb(),a.Jb()}2&e&&(a.xb(10),a.Zb("ngModel",t.userCreate),a.xb(1),a.Zb("ngForOf",t.service.userList),a.xb(8),a.lc(" ","login"==t.userPosition?"Login":"Create",""))},directives:[r.k,o.h,o.e,o.f,r.t,r.u,r.E,r.W,o.d,o.g,i.j,r.s,r.X,r.f,r.F],styles:[".vertical-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;width:100%}.vertical-center[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;margin:auto;float:left}.login-logo[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-align:center}ion-footer[_ngcontent-%COMP%]   .footer_btn[_ngcontent-%COMP%]{margin:auto;height:35pt}"]}),e})()}];let b=(()=>{class e{}return e.\u0275mod=a.Fb({type:e}),e.\u0275inj=a.Eb({factory:function(t){return new(t||e)},imports:[[n.i.forChild(h)],n.i]}),e})(),g=(()=>{class e{}return e.\u0275mod=a.Fb({type:e}),e.\u0275inj=a.Eb({factory:function(t){return new(t||e)},imports:[[i.b,o.a,r.O,b]]}),e})()}}]);