!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{XpXM:function(e,i,o){"use strict";o.r(i),o.d(i,"MainPageModule",(function(){return y}));var s=o("ofXK"),a=o("3Pt+"),c=o("TEn/"),r=o("tyNb"),b=o("fXoL"),l=o("VGr1"),u=o("hq03"),p=o("A7BC");function f(t,n){if(1&t&&(b.Kb(0,"ion-card"),b.Kb(1,"ion-card-content"),b.Kb(2,"ion-list",4),b.Kb(3,"ion-item",5),b.Kb(4,"span",6),b.Ib(5,"ion-icon",7),b.Jb(),b.Kb(6,"ion-label"),b.Kb(7,"h2"),b.Kb(8,"span"),b.jc(9,"Total"),b.Jb(),b.Kb(10,"ion-badge",8),b.jc(11),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&t){var e=b.Ub();b.xb(11),b.kc(e.getTotal)}}function h(t,n){if(1&t&&(b.Kb(0,"ion-card"),b.Kb(1,"ion-card-content"),b.Kb(2,"ion-list",4),b.Kb(3,"ion-item",5),b.Kb(4,"span",6),b.Ib(5,"ion-icon",7),b.Jb(),b.Kb(6,"ion-label"),b.Kb(7,"h2"),b.Kb(8,"span"),b.jc(9,"Won"),b.Jb(),b.Kb(10,"ion-badge",8),b.jc(11),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&t){var e=b.Ub();b.xb(11),b.kc(e.wonTotal)}}function g(t,n){if(1&t){var e=b.Lb();b.Kb(0,"ion-card"),b.Kb(1,"ion-card-content",9),b.Sb("click",(function(){b.ec(e);var t=b.Ub().$implicit;return b.Ub().leadPage(t.stage_id)})),b.Kb(2,"ion-list",4),b.Kb(3,"ion-item",5),b.Kb(4,"span",6),b.Ib(5,"ion-icon",7),b.Jb(),b.Kb(6,"ion-label"),b.Kb(7,"h2"),b.Kb(8,"span"),b.jc(9),b.Jb(),b.Kb(10,"ion-badge",8),b.jc(11),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()}if(2&t){var i=b.Ub().$implicit;b.xb(9),b.kc(i.stage_name),b.xb(2),b.kc(i.count)}}function d(t,n){if(1&t&&(b.Kb(0,"div"),b.ic(1,g,12,2,"ion-card",2),b.Jb()),2&t){var e=n.$implicit;b.xb(1),b.Zb("ngIf",e.count>0)}}var v,m,J,K=[{path:"",component:(v=function(){function e(n,i,o,s){t(this,e),this.service=n,this.alert=i,this.router=o,this.menu=s,this.opportunityLists=[],this.pipelineStages=[],this.stageId="All",this.getTotal=0,this.wonTotal=0,this.shows=!1}var i,o,s;return i=e,(o=[{key:"ngOnInit",value:function(){this.getStages()}},{key:"ionViewDidEnter",value:function(){this.menu.enable(!0)}},{key:"doRefresh",value:function(t){var n=this;setTimeout((function(){t.target.complete(),n.getStages(),n.getTotal=0,n.wonTotal=0,n.shows=!1,n.opportunityLists=[],n.pipelineStages=[],n.stageId=""}),1e3)}},{key:"getStages",value:function(){var t=this;this.service.pipelineStages=[],this.service.showLoader(),this.service.postObs("/callApi",{method:"GET",url:"https://api.insightly.com/v3.1/PipelineStages?count_total=false",data:!1,key:"Basic YmY0NGViN2QtMWFmYy00NjA4LTg4MDQtMGVhNWY4YTc4NTVh"}).subscribe((function(n){200==n.status&&n.result.forEach((function(n,e){873118==n.PIPELINE_ID&&(t.service.pipelineStages.push(n),t.getLead(n,e))}))}))}},{key:"getLead",value:function(t,n){var e=this;this.opportunityLists=[];var i=0;this.service.postObs("/callApi",{method:"GET",url:null==t||"All"==t?"https://api.insightly.com/v3.1/Opportunities?brief=true&count_total=false":"https://api.insightly.com/v3.1/Opportunities/Search?field_name=STAGE_ID&field_value="+t.STAGE_ID+"&brief=false&count_total=false",data:!1,key:"Basic YmY0NGViN2QtMWFmYy00NjA4LTg4MDQtMGVhNWY4YTc4NTVh"}).subscribe((function(o){200==o.status?(o.result.filter((function(t){e.wonTotal+="WON"==t.OPPORTUNITY_STATE?1:0,i+="OPEN"==t.OPPORTUNITY_STATE?1:0})),e.getTotal+=o.result.length,e.opportunityLists.push({stage_id:t.STAGE_ID,stage_name:t.STAGE_NAME,count:i})):e.alert.presentToast("No more data"),0==n&&e.service.hideLoader(),e.shows=!0}))}},{key:"leadPage",value:function(t){console.log(t),this.service.st.set("stage_id",t),this.router.navigate(["home"])}}])&&n(i.prototype,o),s&&n(i,s),e}(),v.\u0275fac=function(t){return new(t||v)(b.Hb(l.a),b.Hb(u.a),b.Hb(r.g),b.Hb(c.R))},v.\u0275cmp=b.Bb({type:v,selectors:[["app-main"]],decls:13,vars:3,consts:[["slot","fixed",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","pullingText","Pull to refresh","refreshingSpinner","circles","refreshingText","Refreshing..."],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"no-col"],["lines","none",1,"no-col"],["slot","start"],["name","business",2,"font-size","22px"],["color","danger",1,"count_class"],[3,"click"]],template:function(t,n){1&t&&(b.Kb(0,"ion-header"),b.Kb(1,"ion-toolbar"),b.Kb(2,"ion-title"),b.jc(3,"Home"),b.Jb(),b.Jb(),b.Jb(),b.Kb(4,"ion-content"),b.Kb(5,"ion-refresher",0),b.Sb("ionRefresh",(function(t){return n.doRefresh(t)})),b.Ib(6,"ion-refresher-content",1),b.Jb(),b.ic(7,f,12,1,"ion-card",2),b.ic(8,h,12,1,"ion-card",2),b.ic(9,d,2,1,"div",3),b.Jb(),b.Kb(10,"ion-footer"),b.Kb(11,"ion-toolbar"),b.Ib(12,"app-footer"),b.Jb(),b.Jb()),2&t&&(b.xb(7),b.Zb("ngIf",n.shows),b.xb(1),b.Zb("ngIf",n.shows),b.xb(1),b.Zb("ngForOf",n.opportunityLists))},directives:[c.p,c.N,c.M,c.k,c.A,c.B,s.k,s.j,c.o,p.a,c.h,c.i,c.v,c.t,c.q,c.u,c.e],styles:[".card-content-ios[_ngcontent-%COMP%], .card-content-md[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.count_class[_ngcontent-%COMP%]{text-align:right;position:absolute;right:0}.no-col[_ngcontent-%COMP%]{background:none}"]}),v)}],T=((J=function n(){t(this,n)}).\u0275mod=b.Fb({type:J}),J.\u0275inj=b.Eb({factory:function(t){return new(t||J)},imports:[[r.i.forChild(K)],r.i]}),J),y=((m=function n(){t(this,n)}).\u0275mod=b.Fb({type:m}),m.\u0275inj=b.Eb({factory:function(t){return new(t||m)},imports:[[s.b,a.a,c.O,T]]}),m)}}])}();