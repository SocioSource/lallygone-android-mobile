(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"ct+p":function(t,e,i){"use strict";i.r(e),i.d(e,"HomePageModule",(function(){return f}));var n=i("ofXK"),o=i("3Pt+"),s=i("TEn/"),r=i("tyNb"),l=i("fXoL"),c=i("VGr1"),a=i("hq03"),b=i("A7BC");function h(t,e){if(1&t&&(l.Kb(0,"ion-select-option",13),l.jc(1),l.Jb()),2&t){const t=e.$implicit;l.Zb("value",t.STAGE_ID),l.xb(1),l.kc(t.STAGE_NAME)}}function p(t,e){1&t&&(l.Kb(0,"ion-item",14),l.Kb(1,"ion-col",15),l.jc(2,"No more open data"),l.Jb(),l.Jb())}function u(t,e){if(1&t){const t=l.Lb();l.Kb(0,"ion-item",16),l.Sb("click",(function(){l.ec(t);const i=e.$implicit;return l.Ub().selectOpportunity(i)})),l.Kb(1,"ion-col"),l.jc(2),l.Jb(),l.Kb(3,"ion-col"),l.Kb(4,"span",17),l.jc(5),l.Jb(),l.Jb(),l.Jb()}if(2&t){const t=e.$implicit,i=e.index;l.xb(2),l.lc("",i+1+". "+t.OPPORTUNITY_NAME," "),l.xb(3),l.kc(t.OPPORTUNITY_STATE)}}const g=[{path:"",component:(()=>{class t{constructor(t,e,i){this.service=t,this.alert=e,this.menu=i,this.opportunityLists=[],this.pipelineStages=[],this.show=!1}ngOnInit(){}ionViewWillEnter(){this.service.st.get("stage_id").then(t=>{this.stageId=null==t||null==t?"All":t,console.log(this.stageId)})}doRefresh(t){setTimeout(()=>{t.target.complete(),this.service.st.get("stage_id").then(t=>{this.stageId=null==this.stageId||null==this.stageId?"All":this.stageId,this.getLead()}),this.opportunityLists=[],this.pipelineStages=[],this.stageId=null==this.stageId||null==this.stageId?"All":this.stageId},1e3)}getLead(){this.service.showLoader(),this.show=!1,this.opportunityLists=[],this.service.st.set("stage_id",this.stageId),this.service.postObs("/callApi",{method:"GET",url:"All"==this.stageId?"https://api.insightly.com/v3.1/Opportunities?brief=true&count_total=false":"https://api.insightly.com/v3.1/Opportunities/Search?field_name=STAGE_ID&field_value="+this.stageId+"&PIPELINE_ID=873118&brief=false&count_total=false",data:!1,key:"Basic YmY0NGViN2QtMWFmYy00NjA4LTg4MDQtMGVhNWY4YTc4NTVh"}).subscribe(t=>{this.service.hideLoader(),200==t.status?t.result.forEach((t,e)=>{"OPEN"===t.OPPORTUNITY_STATE&&(this.show=!0,this.opportunityLists.push(t))}):this.alert.presentToast("No more data")})}selectOpportunity(t){let e={queryParams:{special:JSON.stringify(t)}};this.service.router.navigate(["profile"],e)}lead(){this.service.router.navigate(["/leads"])}}return t.\u0275fac=function(e){return new(e||t)(l.Hb(c.a),l.Hb(a.a),l.Hb(s.R))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-home"]],decls:22,vars:4,consts:[["slot","start"],[1,"ion-text-center","ion-no-margin"],["slot","end","color","primary","lines","none"],["name","funnel"],[2,"display","none"],["interface","popover",1,"pipe_lines",3,"ngModel","ngModelChange","ionChange"],["value","All"],[3,"value",4,"ngFor","ngForOf"],[1,"home-cont"],["slot","fixed",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","pullingText","Pull to refresh","refreshingSpinner","circles","refreshingText","Refreshing..."],["lines","none",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"value"],["lines","none"],[1,"ion-text-center"],[3,"click"],[2,"float","right","color","Red"]],template:function(t,e){1&t&&(l.Kb(0,"ion-header"),l.Kb(1,"ion-toolbar"),l.Kb(2,"ion-buttons",0),l.Ib(3,"ion-back-button"),l.Jb(),l.Kb(4,"ion-title",1),l.jc(5,"Opportunity"),l.Jb(),l.Kb(6,"ion-item",2),l.Ib(7,"ion-icon",3),l.Ib(8,"label",4),l.Kb(9,"ion-select",5),l.Sb("ngModelChange",(function(t){return e.stageId=t}))("ionChange",(function(){return e.getLead()})),l.Kb(10,"ion-select-option",6),l.jc(11,"All"),l.Jb(),l.ic(12,h,2,2,"ion-select-option",7),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Kb(13,"ion-content",8),l.Kb(14,"ion-refresher",9),l.Sb("ionRefresh",(function(t){return e.doRefresh(t)})),l.Ib(15,"ion-refresher-content",10),l.Jb(),l.Kb(16,"ion-list"),l.ic(17,p,3,0,"ion-item",11),l.ic(18,u,6,2,"ion-item",12),l.Jb(),l.Jb(),l.Kb(19,"ion-footer"),l.Kb(20,"ion-toolbar"),l.Ib(21,"app-footer"),l.Jb(),l.Jb()),2&t&&(l.xb(9),l.Zb("ngModel",e.stageId),l.xb(3),l.Zb("ngForOf",e.service.pipelineStages),l.xb(5),l.Zb("ngIf",!e.show),l.xb(1),l.Zb("ngForOf",e.opportunityLists))},directives:[s.p,s.N,s.g,s.c,s.d,s.M,s.t,s.q,s.E,s.W,o.d,o.g,s.F,n.j,s.k,s.A,s.B,s.v,n.k,s.o,b.a,s.j],styles:[".pipe_lines[_ngcontent-%COMP%]{width:0}"]}),t})()}];let d=(()=>{class t{}return t.\u0275mod=l.Fb({type:t}),t.\u0275inj=l.Eb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(g)],r.i]}),t})(),f=(()=>{class t{}return t.\u0275mod=l.Fb({type:t}),t.\u0275inj=l.Eb({factory:function(e){return new(e||t)},imports:[[n.b,o.a,s.O,d]]}),t})()}}]);