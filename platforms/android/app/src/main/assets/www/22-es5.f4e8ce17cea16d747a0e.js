!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{gggo:function(i,n,o){"use strict";o.r(n),o.d(n,"SignPageModule",(function(){return y}));var a,s,r,u=o("ofXK"),c=o("3Pt+"),l=o("TEn/"),b=o("tyNb"),d=o("kOL3"),g=o("fXoL"),h=o("VGr1"),p=o("hq03"),f=["canvas"],v=[{path:"",component:(a=function(){function i(t,n,o,a,s){e(this,i),this.service=t,this.alert=n,this.elementRef=o,this.router=a,this.route=s,this.update=!1,this.editImage=!1}var n,o,a;return n=i,(o=[{key:"ngOnInit",value:function(){this.getOpps()}},{key:"getOpps",value:function(){var e=this;this.service.showLoader();var t={opportunity_id:this.service.opportunity.OPPORTUNITY_ID,delete_status:"S"};console.log(t),this.service.postObs("/getdata/lead",t).subscribe((function(t){200==t.status&&(e.update=!0,e.signature=t.result[0].customer_sign,e.email=t.result[0].email,e.editImage=e.service.checkProperties({sign:e.signature}),console.log(e.editImage)),e.service.hideLoader()}))}},{key:"onResize",value:function(e){console.log(e),this.init()}},{key:"editImagefun",value:function(){this.editImage=!this.editImage,this.update=!1}},{key:"init",value:function(){this.elementRef.nativeElement.querySelector("canvas"),this.signaturePad&&this.signaturePad.clear()}},{key:"ngAfterViewInit",value:function(){this.signaturePad=new d.a(this.signaturePadElement.nativeElement),this.signaturePad.clear(),this.signaturePad.penColor="rgb(51,190,229)"}},{key:"isCanvasBlank",value:function(){if(this.signaturePad)return!!this.signaturePad.isEmpty()}},{key:"clear",value:function(){this.signaturePad.clear()}},{key:"undo",value:function(){var e=this.signaturePad.toData();e&&(e.pop(),this.signaturePad.fromData(e))}},{key:"create",value:function(){var e=this;if(this.service.showLoader(),this.signaturePad.toDataURL()){var t={opportunity_id:this.service.opportunity.OPPORTUNITY_ID,opportunity_user_id:this.service.opportunity.OWNER_USER_ID,customer_sign:this.signaturePad.toDataURL()};this.service.postObs("/postdata/lead",t).subscribe((function(t){e.service.hideLoader(),console.log(t),201==t.status?e.router.navigateByUrl("/home"):e.alert.presentToast("opportunity insert failed..!")}))}}},{key:"updateSign",value:function(){var e=this;if(this.signaturePad.toDataURL()&&!this.editImage){var t={opportunity_id:this.service.opportunity.OPPORTUNITY_ID,customer_sign:this.signaturePad.toDataURL()};this.service.postObs("/putdata/lead",t).subscribe((function(t){e.service.hideLoader(),console.log(t),201==t.status?(e.router.navigateByUrl("/home"),""==e.signature&&null==e.signature&&null==e.signature&&e.pdfGen()):e.router.navigateByUrl("/home")}))}else this.router.navigateByUrl("/home")}},{key:"pdfGen",value:function(){var e=this;this.service.showLoader(),this.service.postObs("/pdfCreate",{opportunity_id:this.service.opportunity.OPPORTUNITY_ID}).subscribe((function(t){console.log(t),e.service.hideLoader(),200==t.status?e.sendMail():e.alert.presentToast("Pdf generate failed")}))}},{key:"sendMail",value:function(){var e=this;this.service.showLoader(),this.service.postObs("/sendMail",{toEmail:this.email,opportunity:this.service.mailData,userdata:this.service.userdata}).subscribe((function(t){e.service.hideLoader(),e.alert.presentToast(200==t.status?"Mail sent":"Mail sending failed..."),console.log(t)}))}},{key:"skip",value:function(){this.router.navigateByUrl("/home")}}])&&t(n.prototype,o),a&&t(n,a),i}(),a.\u0275fac=function(e){return new(e||a)(g.Hb(h.a),g.Hb(p.a),g.Hb(g.l),g.Hb(b.g),g.Hb(b.a))},a.\u0275cmp=g.Bb({type:a,selectors:[["app-sign"]],viewQuery:function(e,t){var i;1&e&&g.hc(f,!0),2&e&&g.bc(i=g.Tb())&&(t.signaturePadElement=i.first)},hostBindings:function(e,t){1&e&&g.Sb("resize",(function(e){return t.onResize(e)}),!1,g.dc)},decls:30,vars:3,consts:[["slot","start"],[1,"signature-pad",3,"ngClass"],[1,"align-center"],[1,"sign_label"],["width","360","height","220",1,"signature-pad-canvas",2,"touch-action","none"],["canvas",""],["color","light","expand","full","size","4",3,"click"],["width","360","height","220",3,"src"],["expand","full","color","secondary",1,"button_pos",3,"click"],["lines","none",1,"ion-float-right"],["expand","block","color","secondary",3,"click"],["type","submit","expand","full","color","secondary",1,"footer_btn",3,"click"]],template:function(e,t){1&e&&(g.Kb(0,"ion-header"),g.Kb(1,"ion-toolbar"),g.Kb(2,"ion-buttons",0),g.Ib(3,"ion-back-button"),g.Jb(),g.Kb(4,"ion-title"),g.jc(5,"Sign"),g.Jb(),g.Jb(),g.Jb(),g.Kb(6,"ion-content"),g.Kb(7,"ion-item",1),g.Kb(8,"ion-row",2),g.Kb(9,"ion-label",3),g.jc(10,"Signature"),g.Jb(),g.Ib(11,"canvas",4,5),g.Kb(13,"ion-button",6),g.Sb("click",(function(){return t.undo()})),g.jc(14," Undo"),g.Jb(),g.Kb(15,"ion-button",6),g.Sb("click",(function(){return t.clear()})),g.jc(16," Clear"),g.Jb(),g.Jb(),g.Jb(),g.Kb(17,"ion-item",1),g.Kb(18,"ion-row",2),g.Kb(19,"ion-label",3),g.jc(20,"Signature"),g.Jb(),g.Ib(21,"img",7),g.Kb(22,"ion-button",8),g.Sb("click",(function(){return t.editImagefun()})),g.jc(23," Edit"),g.Jb(),g.Jb(),g.Jb(),g.Kb(24,"ion-item",9),g.Kb(25,"ion-button",10),g.Sb("click",(function(){return t.pdfGen()})),g.jc(26,"send quote"),g.Jb(),g.Jb(),g.Jb(),g.Kb(27,"ion-footer"),g.Kb(28,"ion-button",11),g.Sb("click",(function(){return t.updateSign()})),g.jc(29,"Submit"),g.Jb(),g.Jb()),2&e&&(g.xb(7),g.Zb("ngClass",t.editImage?"hideClass":""),g.xb(10),g.Zb("ngClass",t.editImage?"":"hideClass"),g.xb(4),g.Zb("src",t.signature,g.fc))},directives:[l.p,l.N,l.g,l.c,l.d,l.M,l.k,l.t,u.i,l.D,l.u,l.f,l.o],styles:[".signature-pad[_ngcontent-%COMP%]{background:#fff;border:1px solid #33bee5!important;margin-top:0}.hideClass[_ngcontent-%COMP%]{display:none}.margin_set[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{width:100%;background:none;color:#000;border:1px solid #33bee5;float:left;margin:2px 0}.badgeColor[_ngcontent-%COMP%]{background:#33bee5!important}.label_color[_ngcontent-%COMP%]{color:#9e9e9e}.button_pos[_ngcontent-%COMP%]{position:absolute;right:0}.sign_label[_ngcontent-%COMP%]{position:absolute;width:100%;text-align:center}.lb-img[_ngcontent-%COMP%]{background:#fff}"]}),a)}],m=((r=function t(){e(this,t)}).\u0275mod=g.Fb({type:r}),r.\u0275inj=g.Eb({factory:function(e){return new(e||r)},imports:[[b.i.forChild(v)],b.i]}),r),y=((s=function t(){e(this,t)}).\u0275mod=g.Fb({type:s}),s.\u0275inj=g.Eb({factory:function(e){return new(e||s)},imports:[[u.b,c.a,l.O,m]]}),s)}}])}();